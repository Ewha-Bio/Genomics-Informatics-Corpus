Microbiome data is compositional because the information that abundance tables contain is relative. In a microbiome abundance table, the total number of counts per sample is highly variable and constrained by the maximum number of DNA reads that the sequencer can provide. This total count constraint induces strong dependencies among the abundances of the different taxa; an increase in the abundance of one taxon implies the decrease of the observed number of counts for some of the other taxa so that the total number of counts does not exceed the specified sequencing depth. Moreover, observed raw abundances and the total number of reads per sample are non-informative since they represent only a fraction or random sample of the original DNA content in the environment. These characteristics of microbiome abundance data clearly fall into the notion of compositional data.
Compositional data are defined as a vector of strictly positive real numbers
x   =   ( x 1 ,   …   ,   x k   ) ;   x 𝑖   >   0   ,   𝑖   ∈   { 1 ,   …   ,   k }
with a constraint or non-informative total sum. The elements of a composition are called components or parts. In a composition the value of each component is not informative by itself and the relevant information is contained in the ratios between the components or parts [8]. Except for the fact that microbiome abundance tables contain many zeros, microbiome data fit the definition of compositional data and, as already acknowledged by many authors [9,10], their analysis requires the use of a proper mathematical theory [11]. Aitchison introduced the log-ratio approach and laid the foundations of Compositional Data Analysis (CoDA).
Mathematically, the assertion that the relevant information is contained in the ratios between the components implies that two proportional compositions are equally informative and this induces equivalence classes of vectors carrying the same information. Two vectors are compositionally equivalent if they are proportional. Each equivalence class has a representative in the unit simplex defined as:
S   k   =   {   x   =   ( x 1 ,   …   ,   x k   ) ,   x 𝑖 > 0   ,   ∑ i = 1 k x 1 = 1 }
The simplex is thus the sample space of compositional data. In microbiome analysis, for example, both the raw counts and their transformation into relative abundances or proportions belong to the same equivalence class and they carry the same relative information.
Three important conditions should be fulfilled for a proper analysis of compositions: permutation invariance, scale invariance and sub-compositional coherence [11]. Permutation invariance states that a change in the order of the parts in the composition should not affect the results. Scale invariance establishes that any function used for the analysis of compositional data must be invariant for any element of the same compositionally equivalent class. Sub-compositional coherence requires that the results obtained when a subset of components is analyzed is coherent with the results for the whole composition. In the context of microbiome analysis this principle is important because we usually work with sub-compositions obtained after filtering out the most low-abundant taxa. Ignoring the compositional nature of microbiome data can result in spurious correlations and sub-compositional incoherencies.
Aitchison [11] put the basis of CoDA by introducing what is now called the Aitchison's log-ratio approach. The log-ratio analysis was introduced in order to meet the principle of scale invariance; as stated by Aitchison [11], “any meaningful (scale-invariant) function of a composition can be expressed in terms of ratios of its components.” Because the logarithmic transformation makes ratios mathematically more tractable, the simplest invariant function is given by the log-ratio between two components, that is:
𝑓 ( x )   =   log   (     x 𝑖 x 𝑗   )   ,   𝑖 , 𝑗   ∈   { 1 ,   …   ,   k }
The generalization of a log-ratio is a log-contrast function defined as a linear combination of logarithms of the components with the restriction that the sum of the coefficients is equal to 0:
𝑓 ( x )   = ∑ i = 1 k a i log ( x i ) ; s o   t h a t   ∑ i = 1 k a i = 0
Log-contrast functions are suitable for CoDA because they are scale invariant.
As an alternative to working in the simplex, several data transformations have been proposed that transform compositional data to the real space where classical statistical analysis can be applied. All of them are based on log-ratios between components.
The additive log-ratio transformation (alr) is the first proposal introduced by Aitchison [11]. Taking one part as the reference, for instance xk, the alr transformation is defined as:
𝑎 𝑙 𝑟 ( x 1 ,   …   ,   x k   )   =   log x 1 x k , . . . , log x k - 1 x k
Aitchison also defined the centered log-ratio transformation (clr) to treat the parts symmetrically. The clr transformation is given by:
𝑐 𝑙 𝑟 ( x 1 ,   …   ,   x k   )   = log x 1 g ( x ) , . . . , log x k g ( x )
where g(x)=∏xi1/k is the geometric mean of the composition. One characteristic of the clr transformation is that the transformed components are restricted to have a sum equal to zero and this implies that some common statistical analyses cannot be applied after the clr transformation because of a singular covariance matrix.
The third alternative is the isometric log-ratio transformation (ilr) and consists in the representation of a composition given a particular orthonormal basis in the simplex. It overcomes the problem of the singular covariance matrix present in the clr-transformation. For a detailed description see Egozcue et al. [12].